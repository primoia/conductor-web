<!--
  Councilor Edit Modal Template
  ‚úÖ Normalizado seguindo especifica√ß√£o de modais padr√£o v1.0
  ‚úÖ Usa BaseModalComponent para comportamentos consistentes
  ‚úÖ ARIA compliant (WCAG 2.1 AA)
-->
<div class="modal-backdrop"
     *ngIf="isVisible"
     (click)="onBackdropClick($event)"
     role="dialog"
     aria-modal="true"
     aria-labelledby="councilor-edit-title">
  <div class="modal-container" (click)="$event.stopPropagation()">
    <!-- Header reutiliz√°vel -->
    <app-modal-header
      id="councilor-edit-title"
      title="Editar Configura√ß√£o"
      icon="fas fa-cog"
      [subtitle]="councilor?.customization?.display_name || councilor?.name || ''"
      [showCloseButton]="true"
      [disabled]="isSaving"
      (close)="onClose()">
    </app-modal-header>

    <!-- Body -->
    <div class="modal-body">
      <form class="edit-form">
        <!-- T√≠tulo/Cargo -->
        <div class="form-group">
          <label for="title">T√≠tulo/Cargo</label>
          <input
            id="title"
            type="text"
            class="form-control"
            [(ngModel)]="title"
            name="title"
            placeholder="Ex: Auditor de Qualidade"
            [disabled]="isSaving"
          />
          <small class="form-hint">O cargo ou fun√ß√£o deste conselheiro</small>
        </div>

        <!-- Diret√≥rio de Trabalho -->
        <div class="form-group">
          <label for="cwd">üìÅ Diret√≥rio de Trabalho</label>
          <input
            id="cwd"
            type="text"
            class="form-control"
            [(ngModel)]="cwd"
            name="cwd"
            placeholder="Ex: /mnt/ramdisk/primoia-main/primoia/billing"
            [disabled]="isSaving"
          />
          <small class="form-hint">Caminho absoluto do diret√≥rio onde o conselheiro ir√° executar</small>
        </div>

        <!-- Nome da Tarefa -->
        <div class="form-group">
          <label for="taskName">Nome da Tarefa</label>
          <input
            id="taskName"
            type="text"
            class="form-control"
            [(ngModel)]="taskName"
            name="taskName"
            placeholder="Ex: Verificar CSS Inline"
            [disabled]="isSaving"
          />
          <small class="form-hint">Nome descritivo da tarefa que ser√° executada</small>
        </div>

        <!-- Prompt da Tarefa -->
        <div class="form-group">
          <label for="taskPrompt">Prompt da Tarefa</label>
          <textarea
            id="taskPrompt"
            class="form-control"
            rows="6"
            [(ngModel)]="taskPrompt"
            name="taskPrompt"
            placeholder="Descreva detalhadamente o que o conselheiro deve fazer..."
            [disabled]="isSaving"
          ></textarea>
          <small class="form-hint">Instru√ß√µes detalhadas para a execu√ß√£o da tarefa</small>
        </div>

        <!-- Intervalo de Execu√ß√£o -->
        <div class="form-group">
          <label for="scheduleValue">Intervalo de Execu√ß√£o</label>
          <div class="schedule-input-group">
            <input
              id="scheduleValue"
              type="text"
              class="form-control"
              [(ngModel)]="scheduleValue"
              name="scheduleValue"
              placeholder="Ex: 30m, 1h, 2d"
              [disabled]="isSaving"
            />
            <div class="schedule-suggestions">
              <button
                *ngFor="let example of getScheduleExamples()"
                type="button"
                class="suggestion-btn"
                (click)="setScheduleValue(example)"
                [disabled]="isSaving"
              >
                {{ example }}
              </button>
            </div>
          </div>
          <small class="form-hint">
            Formato: n√∫mero + unidade (m=minutos, h=horas, d=dias)
          </small>
        </div>

        <!-- Prefer√™ncias de Notifica√ß√£o -->
        <div class="form-group">
          <label>Notifica√ß√µes</label>
          <div class="checkbox-group">
            <label class="checkbox-label">
              <input
                type="checkbox"
                [(ngModel)]="notifyOnSuccess"
                name="notifyOnSuccess"
                [disabled]="isSaving"
              />
              <span>‚úÖ Notificar em sucesso</span>
            </label>

            <label class="checkbox-label">
              <input
                type="checkbox"
                [(ngModel)]="notifyOnWarning"
                name="notifyOnWarning"
                [disabled]="isSaving"
              />
              <span>‚ö†Ô∏è Notificar em alertas</span>
            </label>

            <label class="checkbox-label">
              <input
                type="checkbox"
                [(ngModel)]="notifyOnError"
                name="notifyOnError"
                [disabled]="isSaving"
              />
              <span>üî• Notificar em erros</span>
            </label>
          </div>
          <small class="form-hint">Escolha quando voc√™ quer ser notificado</small>
        </div>

        <!-- Error Message -->
        <div class="error-message" *ngIf="errorMessage" role="alert">
          <i class="fas fa-exclamation-circle"></i>
          {{ errorMessage }}
        </div>
      </form>
    </div>

    <!-- Footer reutiliz√°vel -->
    <app-modal-footer
      [buttons]="footerButtons"
      (buttonClick)="handleFooterAction($event)">
    </app-modal-footer>
  </div>
</div>
