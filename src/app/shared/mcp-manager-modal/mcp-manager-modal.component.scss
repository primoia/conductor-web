// =============================================================================
// MCP MANAGER MODAL STYLES - Conductor Web
// =============================================================================
// Normalizado seguindo especificação de modais padrão v1.0
// Usa variáveis e mixins compartilhados
// =============================================================================

@use '../styles/modal-variables' as *;
@use '../styles/modal-mixins' as mixins;

.modal-overlay {
  @include mixins.modal-backdrop();
}

.mcp-manager {
  @include mixins.modal-container(520px);
  max-height: 85vh;
}

.modal-header {
  @include mixins.modal-header();
  gap: $modal-spacing-sm;

  h2 {
    margin: 0;
    font-size: $modal-font-size-lg;
    font-weight: $font-weight-semibold;
    color: $modal-title-color;
  }

  .instance-name {
    color: $modal-text-secondary;
    font-size: $modal-font-size-sm;
    font-weight: normal;
  }

  .close-btn {
    @include mixins.modal-close-button();
  }
}

.modal-body {
  @include mixins.modal-body();

  &.loading {
    @include mixins.loading-state();
    min-height: 150px;
    color: $modal-text-secondary;
  }
}

.mcp-section {
  margin-bottom: $modal-spacing-lg;

  h3 {
    display: flex;
    align-items: center;
    gap: $modal-spacing-sm;
    margin: 0 0 $modal-spacing-xs 0;
    font-size: $modal-font-size-sm;
    font-weight: $font-weight-semibold;
    color: $modal-title-color;
  }

  .hint {
    margin: 0 0 $modal-spacing-sm 0;
    font-size: $modal-font-size-xs;
    color: $modal-text-secondary;
  }

  &.combined {
    background: $modal-body-bg-alt;
    padding: $modal-spacing-md;
    border-radius: $modal-border-radius;
    margin-top: $modal-spacing-md;
    border: 1px solid $modal-border-color;
  }
}

.badge {
  font-size: 10px;
  padding: 2px 6px;
  border-radius: $modal-border-radius-sm;
  text-transform: uppercase;
  font-weight: $font-weight-medium;

  &.readonly {
    background: $modal-body-bg-alt;
    color: $modal-text-secondary;
    border: 1px solid $modal-border-color;
  }

  &.editable {
    background: rgba($modal-primary-color, 0.1);
    color: $modal-primary-color;
    border: 1px solid rgba($modal-primary-color, 0.2);
  }
}

.mcp-tags {
  display: flex;
  flex-wrap: wrap;
  gap: $modal-spacing-sm;
  min-height: 32px;
}

.tag {
  display: inline-flex;
  align-items: center;
  gap: $modal-spacing-xs;
  padding: $modal-spacing-sm $modal-spacing-md;
  border-radius: $modal-border-radius;
  font-size: $modal-font-size-sm;
  transition: $modal-transition;

  &.template {
    background: $modal-body-bg-alt;
    color: $modal-text-primary;
    border: 1px solid $modal-border-color;
  }

  &.instance {
    background: rgba($modal-primary-color, 0.1);
    color: darken($modal-primary-color, 10%);
    border: 1px solid rgba($modal-primary-color, 0.2);
  }

  &.removable {
    cursor: pointer;

    .remove {
      opacity: 0;
      margin-left: $modal-spacing-xs;
      transition: opacity 0.15s ease;
      color: $modal-error-color;
    }

    &:hover {
      background: rgba($modal-primary-color, 0.15);
      border-color: rgba($modal-primary-color, 0.3);

      .remove {
        opacity: 1;
      }
    }
  }
}

.status {
  font-size: 10px;

  &.healthy {
    color: $modal-success-color;
  }

  &.stopped {
    color: $modal-text-muted;
  }

  &.starting {
    color: $modal-warning-color;
  }

  &.unhealthy {
    color: $modal-error-color;
  }

  &.unknown {
    color: $modal-text-muted;
    opacity: 0.6;
  }
}

.empty {
  color: $modal-text-muted;
  font-style: italic;
  font-size: $modal-font-size-sm;
}

.add-row {
  display: flex;
  gap: $modal-spacing-sm;
  margin-top: $modal-spacing-md;

  select {
    flex: 1;
    padding: $modal-spacing-sm $modal-spacing-md;
    border: 1px solid $modal-border-color;
    border-radius: $modal-border-radius;
    background: $modal-bg;
    color: $modal-text-primary;
    font-size: $modal-font-size-sm;
    transition: $modal-transition;

    &:focus {
      outline: none;
      border-color: $modal-primary-color;
      box-shadow: 0 0 0 3px rgba($modal-primary-color, 0.1);
    }
  }

  .btn-add {
    @include mixins.btn-primary();
    padding: $modal-spacing-sm $modal-spacing-md;
    font-size: $modal-font-size-sm;

    &:disabled {
      opacity: $btn-disabled-opacity;
      cursor: not-allowed;
    }
  }
}

.combined-list {
  display: flex;
  flex-wrap: wrap;
  gap: $modal-spacing-sm;
}

.combined-tag {
  font-size: $modal-font-size-xs;
  padding: $modal-spacing-xs $modal-spacing-sm;
  background: rgba($modal-primary-color, 0.05);
  border-radius: $modal-border-radius-sm;
  color: $modal-text-primary;
  border: 1px solid $modal-border-color;
}

.info-banner {
  display: flex;
  align-items: center;
  gap: $modal-spacing-sm;
  padding: $modal-spacing-sm $modal-spacing-md;
  background: rgba($modal-primary-color, 0.1);
  border: 1px solid rgba($modal-primary-color, 0.2);
  border-radius: $modal-border-radius;
  font-size: $modal-font-size-xs;
  color: darken($modal-primary-color, 10%);
  margin-top: $modal-spacing-md;
}

.error-banner {
  @include mixins.error-message();
  margin: $modal-spacing-sm $modal-spacing-md;
}

.modal-footer {
  @include mixins.modal-footer();

  .btn-secondary {
    @include mixins.btn-secondary();
  }

  .btn-primary {
    @include mixins.btn-primary();
  }
}

// =============================================================================
// RESPONSIVE
// =============================================================================

@media (max-width: $modal-breakpoint-tablet) {
  .mcp-manager {
    max-width: 95%;
  }
}

@media (max-width: $modal-breakpoint-mobile) {
  .mcp-manager {
    width: 100%;
    max-height: 100vh;
    border-radius: 0;
  }

  .mcp-section {
    margin-bottom: $modal-spacing-md;

    h3 {
      font-size: $modal-font-size-xs;
    }
  }

  .add-row {
    flex-direction: column;

    .btn-add {
      width: 100%;
      justify-content: center;
    }
  }
}
