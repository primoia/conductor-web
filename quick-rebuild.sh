#!/bin/bash

echo "ğŸ”¨ Quick Rebuild - Apenas arquivos JSON atualizados"
echo ""
echo "âœ… CorreÃ§Ãµes aplicadas:"
echo "  1. NÃ³ 'explain_code' agora TEM a opÃ§Ã£o 'Aceitar o CÃ³digo Primordial'"
echo "  2. NÃ³ 'explain_code' NÃƒO tem mais 'next' automÃ¡tico"
echo "  3. AÃ§Ã£o 'give_item' movida do OPTION para o NÃ“ 'give_code'"
echo "  4. Item serÃ¡ adicionado ANTES da mensagem 'TRANSFERÃŠNCIA INICIADA'"
echo ""
echo "ğŸ“‹ Fluxo correto agora:"
echo "  1. START â†’ 2 opÃ§Ãµes: 'O que Ã©?' e 'Aceitar'"
echo "  2. Clica 'O que Ã©?' â†’ explain_code (explicaÃ§Ã£o + opÃ§Ã£o 'Aceitar')"
echo "  3. Clica 'Aceitar' â†’ give_code (adiciona item ANTES da mensagem)"
echo "  4. Mensagem 'TRANSFERÃŠNCIA INICIADA' aparece"
echo ""
echo "ğŸ”„ Para testar:"
echo "  1. Clique no botÃ£o ğŸ”„ RecomeÃ§ar no jogo"
echo "  2. Ou faÃ§a Ctrl+Shift+R no navegador"
echo "  3. Inicie nova conversa com o Guia AnciÃ£o"
echo ""
echo "ğŸ“Š Logs esperados no console:"
echo "  ğŸ”„ [DEBUG] Tem opÃ§Ãµes? 1  â† DEVE SER 1, NÃƒO 0!"
echo "  ğŸ”„ [DEBUG] Tem next? false â† DEVE SER FALSE!"
echo "  ğŸ [DEBUG] âš ï¸ PROCESSANDO GIVE_ITEM ANTES DO DIÃLOGO"
echo "  ğŸ’ [DEBUG] Item adicionado com sucesso!"
echo ""
read -p "Pressione Enter para continuar com o build..."

npm run build

echo ""
echo "âœ… Build completo!"
echo ""
echo "ğŸš€ PrÃ³ximos passos:"
echo "  1. Reinicie os containers: bash run-start-all-dev.sh"
echo "  2. Abra o jogo e clique em ğŸ”„ RecomeÃ§ar"
echo "  3. Observe os logs no console (F12)"
